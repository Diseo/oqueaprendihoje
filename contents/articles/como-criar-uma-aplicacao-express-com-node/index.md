---title: Como criar uma Aplicação Express com Nodeauthor: joaofelixdate: 2013-07-04 10:00template: article.jade---Com usuários cada vez mais exigentes, as urls amigáveis se tornaram quase que uma premissa para aplicações Web de sucesso. Para implementa-las, existem várias alternativas, desde configurações no servidor de aplicação à controle de url via javascript. Hoje, eu aprendi a implementa-las a partir do [Express][3] do [Node.js][2].<span class="more"></span>###O que é o [Express][3]O [Express][3] é um framework de aplicações web para [Node.js][2] que provê um robusto leque de funcionalidades para construir simples ou múltiplas páginas, além de aplicações web híbridas. Ah! ele é inspirado no [Sinatra][4]. Apesar de o [Express][3] ser muito mais que um sistema de roteamento, esta será a funcionalidade estudada.###Instalando o [Express][3]O [Express][3] pode ser instalado via [npm][1], através do comando:```npm install express```###Criando a primeira aplicaçãoComo exemplo de aplicação, criarei um sistema de rotas para escrever o a rota escolhida na tela, além de prever os exceções de rotas não informadas ou rotas desconhecidas.###Construindo a aplicaçãoPara iniciar a aplicação, precisaremos criar um arquivo .js , importar o modulo [express][3] e criar um aplicativo:```var express = require('express'), 	   app = express();```Com a aplicação criada, já podemos estabelecer os controles de rotas, através do método [.get][5] do [Express][3], que recebe como parâmetros um caminho (string ou expressão regular) e uma função de callback. A primeira rota criada, procurará um nome informado para exibir:```app.get('/rotas/:fruit?',function(req, res, next){	var fruit = req.params.fruit;	switch(fruit){		case 'pera':		case 'uva':			res.send('Fruta definida: ' + fruit);			break;		default:			next();	}});```Explicando:+ O caminho informado, procura uma variável (:fruit) opcional (?) no caminho especificado "(endereço)/rotas/";+ A função de callback, possui três parâmetros, sendo o primeiro as [informações da requisição][7], o segundo o [objeto de resposta][8] e o terceiro e mágico atributo, a função next (vou explicar...);+ O objeto "req" trará entre outras informações, as ocorrências encontradas no objeto filho "params";+ O objeto "res" corresponde à resposta da requisição atual, onde o método ".send" envia uma mensagem ao ouvinte;+ A função next força o [Express][3] a processar a próxima rota correspondente a solicitação atual.Como caminho de exceção, criaremos uma rota para interceptar toda ocorrência diferente da esperada:```app.get('/rotas/*?', function(req,res){	res.send('Nada foi informado.');});```E também uma resposta caso o usuário não acesse a raiz da aplicação:```app.get('/*?', function(req,res){	res.send('As rotas são respondidas apenas em /rotas/');});```Para finalizar, precisamos instruir a aplicação a escutar em alguma porta:```var port = 3000;app.listen(port);```Pronto, agora, basta rodar a aplicação e se divertir com ela! Recomendo dar uma olhada na [documentação][9] do [Express][3], lá tem muita coisa interessante. Abaixo, segue o código completo:```var express = require('express');app = express();app.get('/rotas/:fruit?',function(req, res, next){	var fruit = req.params.fruit;	switch(fruit){		case 'pera':		case 'uva':			res.send('Fruta definida: ' + fruit);			break;		default:			next();	}});app.get('/rotas/*?', function(req,res){	res.send('Nada foi informado.');});app.get('/?', function(req,res){	res.send('As rotas são respondidas apenas em /rotas/');});var port = 3000;app.listen(port);```Caso queira apreciar algumas aplicações utilizando o Express, basta clicar [neste link][6].Mais uma vez obrigado, e desta vez tentarei voltar com uma frequência maior de postagens.[1]: https://npmjs.org/[2]: http://nodejs.org/[3]: http://expressjs.com/[4]: http://www.sinatrarb.com/[5]: http://expressjs.com/api.html#app.get[6]: http://expressjs.com/applications.html[7]: http://expressjs.com/api.html#req.params[8]: http://expressjs.com/api.html#res.status[9]: http://expressjs.com/api.html